import{s as i,g as r}from"./storage.js";chrome.runtime.onInstalled.addListener(()=>{i({interval:15,soundEnabled:!0,notificationsEnabled:!0,theme:"light"})});chrome.runtime.onMessage.addListener((e,t,n)=>{e.action==="startTimer"?(chrome.alarms.create("mindfulnessReminder",{delayInMinutes:e.interval}),n({status:"Timer started"})):e.action==="stopTimer"&&(chrome.alarms.clear("mindfulnessReminder"),n({status:"Timer stopped"}))});chrome.alarms.onAlarm.addListener(async e=>{if(e.name==="mindfulnessReminder"){const{notificationsEnabled:t}=await r(["notificationsEnabled"]);if(t){const n=[{text:"Take a deep breath and relax.",author:"Unknown"},{text:"Stay present and mindful.",author:"Thich Nhat Hanh"}],a=n[Math.floor(Math.random()*n.length)];chrome.notifications.create({type:"basic",iconUrl:"icons/icon128.png",title:"Mindfulness Reminder",message:a.text+` â€” ${a.author}`,buttons:[{title:"Take Break"},{title:"Snooze"}],requireInteraction:!0})}}});chrome.notifications.onButtonClicked.addListener((e,t)=>{e==="mindfulnessReminder"&&(t===0?chrome.notifications.clear(e):t===1&&(chrome.notifications.clear(e),chrome.alarms.create("mindfulnessReminder",{delayInMinutes:5})))});
